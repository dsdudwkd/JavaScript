<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cd플레이어</title>
    <link rel="stylesheet" href="common.css">
    <script>
        /* 
        1. 선택자 잡기
        2. 어떤 이벤트를 줄건지
        3. 이벤트 객체와 실행되는 객체를 어떻게 연결할 것인지
        4. 실행되는 객체에게 class를 어떻게 전달할 것인지

        */

        window.onload = function(){
            const item = document.querySelectorAll('.item');

            const next = document.querySelector('.next');
            const prev = document.querySelector('.prev');
            const dot = document.querySelectorAll('.dot-list li');
            

            let count = 0;
            let itemNum = item.length; //아이템의 갯수
            // console.log(itemNum);

            itemCount(); //count값을 로딩과 동시에 가져오게끔하려고 함수 실행 => 도트에 색깔 채워놓는

            next.addEventListener('click',function(){
                if(count < itemNum-1){
                    count++;
                    // console.log(count);
                }else{
                    count = 0;
                }
                itemCount();
            })

            prev.addEventListener('click', function(){
                if(count > 0){
                    count--;
                    // console.log(count);
                }else{
                    count = itemNum-1;
                    // console.log(count);
                }
                itemCount();
                
            })

            /* 
            배열 형태의 요소에는 이벤트를 직접적으로 줄 수 없다(선택자를 지정할 수 없기 때문에) 
            => 반복문을 돌려서 이벤트 적용해야 함
            */
            
            for(let i = 0; i < itemNum; i++){
                dot[i].addEventListener('click',function(){
                    count = i;
                    itemCount();
                })
            }

            function itemCount(){
                for(let i=0; i<itemNum; i++){
                    if(count == i){
                        item[i].classList.add('active');
                        dot[i].classList.add('active');
                    }else{
                        item[i].classList.remove('active');
                        dot[i].classList.remove('active');
                    }
                }
            }
        }
    </script>
    

</head>
<body>

    <div class="container">
        <div class="item active">
            <div class="disk">
                <div class="disk-inner"></div>
            </div>
            <a href="https://www.youtube.com/watch?v=nM0xDI5R50E" target="_blank" class="cover">
                <img src="image/iu_0.jpg" alt="커버이미지">
            </a>
        </div>

        <div class="item">
            <div class="disk">
                <div class="disk-inner"></div>
            </div>
            <a href="https://www.youtube.com/watch?v=nM0xDI5R50E" target="_blank" class="cover">
                <img src="image/iu_1.jpg" alt="커버이미지">
            </a>
        </div>

        <div class="item">
            <div class="disk">
                <div class="disk-inner"></div>
            </div>
            <a href="https://www.youtube.com/watch?v=nM0xDI5R50E" target="_blank" class="cover">
                <img src="image/iu_2.jpg" alt="커버이미지">
            </a>
        </div>

        <div class="item">
            <div class="disk">
                <div class="disk-inner"></div>
            </div>
            <a href="https://www.youtube.com/watch?v=nM0xDI5R50E" target="_blank" class="cover">
                <img src="image/iu_3.jpg" alt="커버이미지">
            </a>
        </div>
    </div>

    <div class="btn-container">
        <button class="prev">PREV</button>
        <ul class="dot-list">
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
        <button class="next">NEXT</button>
    </div>
    
</body>
</html>